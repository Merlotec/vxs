# Apply this only to .cu files
If:
  PathMatch: ".*\\.cu$"

CompileFlags:
  Add:
    - --no-cuda-version-check
    - -I/home/box/dev/drone/vxs/cuda_octree/include
  # 1) Remove all NVCC-only or driver-only flags (using "*" as a glob suffix)
  Remove:
    - -forward-unknown-to-host-compiler
    - --options-file
    - --generate-code=*
    - --expt-relaxed-constexpr
    - -Xcompiler=*
    - -rdc=true
    - --cuda-mode=*
    - --cuda-path=*
    - --cuda-gpu-arch=*

  # 2) If your compile_commands.json still invokes nvcc, tell clangd to
  #    call nvcc to extract its default include paths instead of failing.
  QueryDriver:
    - "/usr/lib/ccache/nvcc*"
    - "/usr/local/cuda/bin/nvcc*"
    - "/usr/bin/clang++*"
